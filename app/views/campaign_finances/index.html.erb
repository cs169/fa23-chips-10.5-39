<h1>Campaign Finances</h1>

<%= form_with url: campaign_finances_path, method: :get, local: true do |form| %>
  <div>
    <%= form.label :cycle, 'Election Cycle' %>
    <%= form.select :cycle, options_for_select((2010..2020).step(2).map { |y| [y, y] }) %>
  </div>

  <div>
    <%= form.label :category, 'Financial Category' %>
    <%= form.select :category, options_for_select([
      ['Candidate Loan', 'candidate-loan'],
      ['Contribution Total', 'contribution-total'],
      # ... other categories
    ]) %>
  </div>

  <%= form.submit 'Search' %>
<% end %>

<% if @candidates.present? %>
  <h2>Search Results</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Party</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      <% @candidates.each do |candidate| %>
        <tr>
          <td><%= candidate['name'] %></td>
          <td><%= candidate['party'] %></td>
          <td><%= link_to 'View Details', campaign_finance_path(candidate['id'], cycle: params[:cycle]) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
